<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FAVORITE GARDEN</title>
    <style>
        :root { 
            --main: #2ecc71; --dark: #1b3d18; --gold: #f1c40f; 
            --purple: #9b59b6; --neon: #39ff14; 
            --rainbow: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #8f00ff); 
        }
        body { background: var(--main); font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; color: #333; overflow: hidden; }
        
        #auth-screen { position: fixed; inset: 0; background: #27ae60; z-index: 2000; display: flex; justify-content: center; align-items: center; }
        .auth-card { background: white; padding: 40px; border-radius: 30px; width: 350px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.2); }
        .auth-card input { width: 100%; padding: 12px; margin: 10px 0; border: 1px solid #ddd; border-radius: 10px; box-sizing: border-box; font-size: 16px; }
        .auth-card button { width: 100%; padding: 15px; border: none; border-radius: 10px; background: #1b3d18; color: white; font-weight: bold; cursor: pointer; }

        #sidebar { width: 420px; background: var(--dark); color: white; padding: 15px; display: flex; flex-direction: column; box-shadow: 5px 0 15px rgba(0,0,0,0.3); }
        .tab-btn { flex: 1; padding: 12px; border: none; cursor: pointer; background: rgba(255,255,255,0.1); color: white; font-weight: bold; }
        .tab-btn.active { background: var(--gold); color: black; }
        
        .list-container { flex-grow: 1; overflow-y: auto; margin: 10px 0; padding-right: 5px; }
        .ui-item { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); margin-bottom: 4px; padding: 10px 15px; border-radius: 8px; display: flex; justify-content: space-between; align-items: center; font-weight: 600; cursor: pointer; }
        .ui-item.selected { border: 2px solid var(--gold); background: rgba(241, 196, 15, 0.15); }

        #main-game { flex-grow: 1; display: flex; flex-direction: column; align-items: center; padding: 20px; overflow-y: auto; background: #a8e063; }
        #garden-container.fence { border: 15px solid #5d4037; background: #a1887f; padding: 20px; border-radius: 25px; }
        .stats { background: white; padding: 10px 30px; border-radius: 50px; display: flex; gap: 15px; font-weight: bold; margin-bottom: 15px; }
        .garden { display: grid; grid-template-columns: repeat(auto-fill, 80px); justify-content: center; gap: 10px; width: 100%; max-width: 650px; }
        .plot { width: 80px; height: 80px; background: #795548; border-radius: 15px; cursor: pointer; display: flex; justify-content: center; align-items: center; font-size: 35px; border: 3px solid rgba(0,0,0,0.2); }
        .plot.gold-plot { border-color: var(--gold); box-shadow: 0 0 10px var(--gold); }
        
        .modal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 25px; border-radius: 25px; width: 450px; z-index: 1000; box-shadow: 0 0 100px rgba(0,0,0,0.5); }
        .btn { padding: 10px 15px; border-radius: 8px; border: none; cursor: pointer; font-weight: bold; }
        .check-box { width: 25px; height: 25px; border: 2px solid #ddd; border-radius: 5px; cursor: pointer; }
        .check-box.active { background: var(--main); }
    </style>
</head>
<body>

<div id="auth-screen">
    <div class="auth-card">
        <h1>FAVORITE GARDEN</h1>
        <input type="text" id="log" placeholder="–õ–æ–≥—ñ–Ω">
        <input type="password" id="pas" placeholder="–ü–∞—Ä–æ–ª—å">
        <button onclick="login()">–ì–†–ê–¢–ò</button>
    </div>
</div>

<div id="sidebar">
    <h2 id="u-name">üë§ –°–∞–¥—ñ–≤–Ω–∏–∫</h2>
    <div style="display:flex; margin-bottom: 10px;">
        <button id="t1" class="tab-btn active" onclick="tab('seeds')">üå± –ù–ê–°–Ü–ù–ù–Ø</button>
        <button id="t2" class="tab-btn" onclick="tab('pets')">üêæ –ü–ò–¢–û–ú–¶–Ü</button>
        <button id="t3" class="tab-btn" onclick="tab('storage')">üì¶ –°–ö–õ–ê–î</button>
    </div>
    <div id="seeds-list" class="list-container"></div>
    <div id="pets-list" class="list-container" style="display:none">
        <button class="btn" style="width:100%; background:var(--purple); color:white; margin-bottom:10px;" onclick="openMutMachine()">üß¨ –ú–ê–®–ò–ù–ê –ú–£–¢–ê–¶–Ü–ô</button>
        <div id="pets-content"></div>
    </div>
    <div id="storage-list" class="list-container" style="display:none"></div>
    <div style="background:rgba(0,0,0,0.4); padding:15px; border-radius:15px; margin-top: auto;">
        <div>ü™ô –ë–∞–ª–∞–Ω—Å: <span id="ui-coins-side" style="color:var(--gold); font-size: 18px;">0</span></div>
    </div>
</div>

<div id="main-game">
    <div class="stats">
        <span>ü™ô <span id="ui-coins">0</span></span>
        <span>üì¶ <span id="ui-storage-val">0</span></span>
        <span>üü© <span id="ui-plots-count">0</span> –ì—Ä—è–¥–æ–∫</span>
    </div>
    <div id="garden-container"><div class="garden" id="garden"></div></div>
    <div style="display:flex; gap:10px; margin-top:20px;">
        <button class="btn" style="background:var(--gold); width:150px;" onclick="openShop()">üõí –ú–ê–ì–ê–ó–ò–ù</button>
        <button class="btn" style="background:#e67e22; color:white; width:150px;" onclick="sellAll()">üí∞ –ü–†–û–î–ê–¢–ò –í–°–ï</button>
    </div>
</div>

<div id="shop-modal" class="modal">
    <div style="display:flex; gap:5px; margin-bottom:15px; overflow-x: auto;">
        <button class="btn" onclick="renderShop('seeds')">üå± –ù–∞—Å—ñ–Ω–Ω—è</button>
        <button class="btn" onclick="renderShop('eggs')">ü•ö –Ø–π—Ü—è</button>
        <button class="btn" onclick="renderShop('mut')">üß™ –ú—É—Ç–∞—Ü—ñ—ó</button>
        <button class="btn" onclick="renderShop('dec')">üé® –ü—Ä–∏–∫—Ä–∞—Å–∏</button>
        <button class="btn" style="background: #3498db; color: white;" onclick="openPromo()">üéüÔ∏è –ü—Ä–æ–º–æ</button>
    </div>
    <div id="shop-items" style="max-height:350px; overflow-y:auto;"></div>
    <button class="btn" style="width:100%; margin-top:10px;" onclick="closeShop()">–ó–∞–∫—Ä–∏—Ç–∏</button>
</div>

<div id="mut-modal" class="modal">
    <h3 style="color:var(--purple)">–ú–∞—à–∏–Ω–∞ –ú—É—Ç–∞—Ü—ñ–π üß¨</h3>
    <div id="mut-selection" style="max-height:300px; overflow-y:auto;"></div>
    <button class="btn" style="width:100%; background:var(--purple); color:white; margin-top:15px;" onclick="doMutation()">–ú–£–¢–£–í–ê–¢–ò ‚úÖ</button>
    <button class="btn" style="width:100%; margin-top:5px;" onclick="closeMut()">–°–∫–∞—Å—É–≤–∞—Ç–∏</button>
</div>

<div id="promo-modal" class="modal">
    <h3>üéüÔ∏è –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ –ü—Ä–æ–º–æ–∫–æ–¥</h3>
    <input type="text" id="promo-input" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥..." style="width:100%; padding:10px; border-radius:10px; border:1px solid #ddd; margin-bottom:10px;">
    <button class="btn" style="width:100%; background:var(--gold);" onclick="usePromo()">–ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏</button>
    <button class="btn" style="width:100%; margin-top:5px;" onclick="this.parentElement.style.display='none'">–ó–∞–∫—Ä–∏—Ç–∏</button>
</div>

<script>
    const PLANTS = {
        carrot: {n:'–ú–æ—Ä–∫–≤–∞', e:'ü•ï', c:50, s:120, t:3000},
        cucumber: {n:'–û–≥—ñ—Ä–æ–∫', e:'ü•í', c:120, s:300, t:4000},
        pea: {n:'–ì–æ—Ä–æ—Ö', e:'ü´õ', c:200, s:500, t:5000},
        potato: {n:'–ö–∞—Ä—Ç–æ–ø–ª—è', e:'ü•î', c:800, s:2000, t:8000},
        tomato: {n:'–¢–æ–º–∞—Ç', e:'üçÖ', c:2500, s:7000, t:12000},
        eggplant: {n:'–ë–∞–∫–ª–∞–∂–∞–Ω', e:'üçÜ', c:7000, s:20000, t:18000},
        corn: {n:'–ö—É–∫—É—Ä—É–¥–∑–∞', e:'üåΩ', c:15000, s:45000, t:25000},
        strawberry: {n:'–ü–æ–ª—É–Ω–∏—Ü—è', e:'üçì', c:30000, s:90000, t:30000},
        blueberry: {n:'–ß–æ—Ä–Ω–∏—Ü—è', e:'ü´ê', c:60000, s:200000, t:35000},
        apple: {n:'–Ø–±–ª—É–∫–æ', e:'üçé', c:120000, s:450000, t:45000},
        mango: {n:'–ú–∞–Ω–≥–æ', e:'ü•≠', c:300000, s:1200000, t:55000},
        dragon: {n:'–ü—ñ—Ç–∞—è', e:'üêâ', c:700000, s:3000000, t:70000},
        maple: {n:'–ö–ª–µ–Ω', e:'üçÅ', c:1500000, s:7000000, t:90000},
        oak: {n:'–î—É–±', e:'üå≥', c:4000000, s:20000000, t:120000},
        coconut: {n:'–ü–∞–ª—å–º–∞', e:'üå¥', c:10000000, s:55000000, t:150000},
        ginger: {n:'–ü—Ä—è–Ω–∏–∫', e:'üç™', c:20000000, s:120000000, t:180000},
        gift: {n:'–ü–æ–¥–∞—Ä—É–Ω–æ–∫', e:'üéÅ', c:50000000, s:350000000, t:220000},
        tree: {n:'–Ø–ª–∏–Ω–∫–∞', e:'üéÑ', c:150000000, s:1200000000, t:300000},
        cactus: {n:'–ö–∞–∫—Ç—É—Å', e:'üåµ', c:500000000, s:5000000000, t:600000}
    };

    const EGGS = { normal: {n:'–ó–≤–∏—á–∞–π–Ω–µ –Ø–π—Ü–µ', e:'ü•ö', c:5000, t:10000}, snow: {n:'–°–Ω—ñ–∂–Ω–µ –Ø–π—Ü–µ', e:'‚ùÑÔ∏è', c:60000, t:20000} };
    const MUT_TYPES = { '–ó–æ–ª–æ—Ç–∞': 'var(--gold)', '–ù—ñ—á–Ω–∞': 'var(--purple)', '–ù–µ–æ–Ω–æ–≤–∞': 'var(--neon)', '–†–∞–¥—É–∂–Ω–∞': 'var(--rainbow)' };

    let p = { name:"", pass:"", coins:1000, storage:{}, plots:12, seeds:{carrot:5}, eggsInv:{}, pets:[], mutations:[], favFruit:null, fence:false, goldPlots:false, usedPromos:[] };
    let curItem = {type:'seed', id:'carrot'};
    let selPets = []; let selMutIdx = -1;

    function login() {
        const id = document.getElementById('log').value.trim();
        const ps = document.getElementById('pas').value.trim();
        if(!id || !ps) return;
        let s = localStorage.getItem('fg_v2026_'+id);
        if(s) { p = JSON.parse(s); if(p.pass!==ps) return; }
        else { p.name=id; p.pass=ps; }
        document.getElementById('auth-screen').style.display='none';
        document.getElementById('u-name').innerText = "üë§ "+p.name;
        init();
    }

    function init() { renderGarden(); renderInv(); renderStorage(); updateUI(); setInterval(save, 5000); }

    function renderGarden() {
        const g = document.getElementById('garden'); g.innerHTML = '';
        const cont = document.getElementById('garden-container');
        cont.className = p.fence ? 'fence' : '';
        for(let i=0; i<p.plots; i++) {
            const d = document.createElement('div'); d.className = 'plot' + (p.goldPlots?' gold-plot':'');
            d.innerHTML = 'üü´';
            d.onclick = () => {
                if(d.innerHTML === 'üü´') {
                    if(curItem.type==='seed' && (p.seeds[curItem.id]||0) > 0) {
                        let id = curItem.id; p.seeds[id]--; d.innerHTML = 'üå±';
                        setTimeout(() => { d.innerHTML = PLANTS[id].e; d.dataset.val = id; d.dataset.mode = 'plant'; }, PLANTS[id].t);
                        renderInv();
                    } else if(curItem.type==='egg' && (p.eggsInv[curItem.id]||0) > 0) {
                        let id = curItem.id; p.eggsInv[id]--; d.innerHTML = EGGS[id].e;
                        setTimeout(() => { d.innerHTML = 'üê£'; d.dataset.val = id; d.dataset.mode = 'egg'; }, EGGS[id].t);
                        renderInv();
                    }
                } else if(d.dataset.mode === 'plant') {
                    p.storage[d.dataset.val] = (p.storage[d.dataset.val]||0)+1;
                    d.innerHTML = 'üü´'; delete d.dataset.mode; updateUI(); renderStorage();
                } else if(d.dataset.mode === 'egg') {
                    let pet = d.dataset.val==='snow' ? {n:'–ü—ñ–Ω–≥–≤—ñ–Ω',e:'üêß'} : {n:'–ü–µ—Å',e:'üê∂'};
                    p.pets.push(pet); d.innerHTML = 'üü´'; delete d.dataset.mode; renderPets();
                }
            };
            g.appendChild(d);
        }
    }

    function renderInv() {
        const c = document.getElementById('seeds-list'); c.innerHTML = '';
        for(let k in PLANTS) {
            let isSel = curItem.type==='seed' && curItem.id===k;
            c.innerHTML += `<div class="ui-item ${isSel?'selected':''}" onclick="curItem={type:'seed',id:'${k}'};renderInv()"><span>${PLANTS[k].e} ${PLANTS[k].n}</span><span>${p.seeds[k]||0}</span></div>`;
        }
        for(let k in EGGS) {
            let isSel = curItem.type==='egg' && curItem.id===k;
            c.innerHTML += `<div class="ui-item ${isSel?'selected':''}" onclick="curItem={type:'egg',id:'${k}'};renderInv()"><span>${EGGS[k].e} ${EGGS[k].n}</span><span>${p.eggsInv[k]||0}</span></div>`;
        }
    }

    function renderStorage() {
        const c = document.getElementById('storage-list'); c.innerHTML = '';
        for(let t in p.storage) if(p.storage[t] > 0) c.innerHTML += `<div class="ui-item ${p.favFruit===t?'selected':''}" onclick="setFav('${t}')"><span>${PLANTS[t].e} ${PLANTS[t].n}</span><span>${p.storage[t]}</span></div>`;
    }

    function renderShop(tab) {
        const c = document.getElementById('shop-items'); c.innerHTML = '';
        if(tab==='seeds') for(let k in PLANTS) c.innerHTML += `<div class="ui-item"><span>${PLANTS[k].e} ${PLANTS[k].n}</span><button class="btn" onclick="buy('s','${k}',${PLANTS[k].c})">${PLANTS[k].c}</button></div>`;
        if(tab==='eggs') for(let k in EGGS) c.innerHTML += `<div class="ui-item"><span>${EGGS[k].e} ${EGGS[k].n}</span><button class="btn" onclick="buy('e','${k}',${EGGS[k].c})">${EGGS[k].c}</button></div>`;
        if(tab==='mut') for(let k in MUT_TYPES) c.innerHTML += `<div class="ui-item"><span>üß™ ${k}</span><button class="btn" onclick="buy('m','${k}',150000)">150–∫</button></div>`;
        if(tab==='dec') {
            c.innerHTML += `<div class="ui-item"><span>üü© +5 –ì—Ä—è–¥–æ–∫</span><button class="btn" onclick="buy('d','plots',${p.plots*2000})">${p.plots*2000}</button></div>`;
            c.innerHTML += `<div class="ui-item"><span>ü™µ –ó–∞–±–æ—Ä</span><button class="btn" onclick="buy('d','fence',200000)">200–∫</button></div>`;
            c.innerHTML += `<div class="ui-item"><span>‚ú® –ì—Ä—è–¥–∫–∏-–ª—é–∫—Å</span><button class="btn" onclick="buy('d','gold',100000)">100–∫</button></div>`;
        }
    }

    function buy(type, id, cost) {
        if(p.coins < cost) return;
        p.coins -= cost;
        if(type==='s') p.seeds[id] = (p.seeds[id]||0)+1;
        if(type==='e') p.eggsInv[id] = (p.eggsInv[id]||0)+1;
        if(type==='m') p.mutations.push(id);
        if(type==='d') { if(id==='plots') p.plots+=5; if(id==='fence') p.fence=true; if(id==='gold') p.goldPlots=true; renderGarden(); }
        updateUI(); renderInv();
    }

    function openMutMachine() {
        document.getElementById('mut-modal').style.display='block';
        selPets = []; selMutIdx = -1;
        const c = document.getElementById('mut-selection'); c.innerHTML = '–û–±–µ—Ä—ñ—Ç—å 2-—Ö –ø—ñ—Ç–æ–º—Ü—ñ–≤ —Ç–∞ –º—É—Ç–∞—Ü—ñ—é:<br>';
        p.pets.forEach((pet, i) => c.innerHTML += `<div class="ui-item"><span>${pet.e} ${pet.n}</span><div class="check-box" onclick="this.classList.toggle('active');togglePet(${i})"></div></div>`);
        p.mutations.forEach((m, i) => c.innerHTML += `<div class="ui-item"><span>üß™ ${m}</span><div class="check-box mut-chk" onclick="selectMutation(${i},this)"></div></div>`);
    }

    function togglePet(i) { if(selPets.includes(i)) selPets = selPets.filter(x=>x!==i); else if(selPets.length<2) selPets.push(i); }
    function selectMutation(i,el) { document.querySelectorAll('.mut-chk').forEach(b=>b.classList.remove('active')); el.classList.add('active'); selMutIdx=i; }
    function doMutation() {
        if(selPets.length<2 || selMutIdx===-1) return;
        p.pets.push({n:'–ú—É—Ç–∞–Ω—Ç', e:'üß¨', mut: p.mutations[selMutIdx]});
        p.pets = p.pets.filter((_, i) => !selPets.includes(i));
        p.mutations.splice(selMutIdx, 1);
        closeMut(); renderPets();
    }

    function sellAll() {
        let total = 0; let mult = 1;
        p.pets.forEach(pet => { if(pet.mut==='–ó–æ–ª–æ—Ç–∞') mult+=1; if(pet.mut==='–ù—ñ—á–Ω–∞') mult+=0.5; });
        for(let t in p.storage) { if(t !== p.favFruit) { total += p.storage[t] * PLANTS[t].s * mult; p.storage[t] = 0; } }
        p.coins += total; updateUI(); renderStorage();
    }

    function openPromo() { document.getElementById('promo-modal').style.display='block'; }
    function usePromo() {
        const code = document.getElementById('promo-input').value.trim();
        if(p.usedPromos.includes(code)) { alert("–í–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–æ!"); return; }
        
        if(code === 'BORIS') {
            p.pets.push({n:'–ö—ñ—Ç –ë–æ—Ä–∏—Å', e:'üêà'});
            p.usedPromos.push(code);
            alert("–ê–∫—Ç–∏–≤–æ–≤–∞–Ω–æ: –ö—ñ—Ç –ë–æ—Ä–∏—Å! üêà");
        } else if(code === '2026') {
            p.coins += 20260;
            p.usedPromos.push(code);
            alert("–û—Ç—Ä–∏–º–∞–Ω–æ 20,260 –º–æ–Ω–µ—Ç! üéÑ");
        } else if(code === 'FreeEgg') {
            p.eggsInv['normal'] = (p.eggsInv['normal']||0) + 1;
            p.usedPromos.push(code);
            alert("–û—Ç—Ä–∏–º–∞–Ω–æ –ó–≤–∏—á–∞–π–Ω–µ –Ø–π—Ü–µ! ü•ö");
        } else if(code === 'Free10000') {
            p.coins += 10000;
            p.usedPromos.push(code);
            alert("–û—Ç—Ä–∏–º–∞–Ω–æ 10,000 –º–æ–Ω–µ—Ç! ü™ô");
        } else {
            alert("–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥!");
            return;
        }
        
        document.getElementById('promo-input').value = "";
        updateUI(); renderInv(); renderPets();
    }

    function renderPets() {
        const c = document.getElementById('pets-content'); c.innerHTML = '';
        p.pets.forEach(pet => c.innerHTML += `<div class="ui-item"><span>${pet.e} ${pet.n}</span><b style="color:${MUT_TYPES[pet.mut]||'white'}">${pet.mut||''}</b></div>`);
    }

    function setFav(t) { p.favFruit = (p.favFruit===t?null:t); renderStorage(); }
    function updateUI() { 
        document.getElementById('ui-coins').innerText = Math.floor(p.coins); 
        document.getElementById('ui-coins-side').innerText = Math.floor(p.coins); 
        document.getElementById('ui-plots-count').innerText = p.plots;
        let sTotal = 0; for(let t in p.storage) sTotal += p.storage[t];
        document.getElementById('ui-storage-val').innerText = sTotal;
    }
    function tab(t) { 
        document.getElementById('seeds-list').style.display = t==='seeds'?'block':'none';
        document.getElementById('pets-list').style.display = t==='pets'?'block':'none';
        document.getElementById('storage-list').style.display = t==='storage'?'block':'none';
        document.getElementById('t1').className = t==='seeds'?'tab-btn active':'tab-btn';
        document.getElementById('t2').className = t==='pets'?'tab-btn active':'tab-btn';
        document.getElementById('t3').className = t==='storage'?'tab-btn active':'tab-btn';
        if(t==='pets') renderPets();
    }
    function save() { if(p.name) localStorage.setItem('fg_v2026_'+p.name, JSON.stringify(p)); }
    function openShop() { document.getElementById('shop-modal').style.display='block'; renderShop('seeds'); }
    function closeShop() { document.getElementById('shop-modal').style.display='none'; }
    function closeMut() { document.getElementById('mut-modal').style.display='none'; }
</script>
</body>
</html>